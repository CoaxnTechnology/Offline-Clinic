Complete API design for clinic system


  Authentication API

  Login
  • POST /api/auth/login - username, password → token + admin info
  • POST /api/auth/logout - clear session
  • GET /api/auth/me - get current logged-in admin


  Patient API

  List patients
  • GET /api/patients - query params: search, page, limit, role filter
  • Returns: list of patients

  Get patient
  • GET /api/patients/<id> - single patient details

  Create patient
  • POST /api/patients - body: patient data
  • Access: receptionist, doctor

  Update patient
  • PUT /api/patients/<id> - update patient info
  • Access: receptionist, doctor

  Delete patient
  • DELETE /api/patients/<id> - soft delete or hard delete
  • Access: receptionist, doctor

  Search patients
  • GET /api/patients/search?q=<query> - search by name, phone, ID


  Appointment API

  List appointments
  • GET /api/appointments - query params: date, patient_id, doctor, status, page
  • Returns: list of appointments

  Get appointment
  • GET /api/appointments/<id> - single appointment details

  Create appointment
  • POST /api/appointments - body: patient_id, doctor, date, time, department
  • Access: receptionist, doctor

  Update appointment
  • PUT /api/appointments/<id> - update appointment details
  • Access: receptionist, doctor, technician

  Update appointment status
  • PUT /api/appointments/<id>/status - change status (Waiting, In-Room, In-Scan,
    Review, Completed)
  • Access: doctor, technician

  Delete appointment
  • DELETE /api/appointments/<id>
  • Access: receptionist, doctor

  Schedule appointment
  • POST /api/appointments/schedule - bulk scheduling
  • Access: receptionist


  Admin Management API

  List admins
  • GET /api/admin - query params: role, is_active, page, limit
  • Returns: paginated list of admins
  • Access: all authenticated admins

  Get admin
  • GET /api/admin/<id> - admin details
  • Access: super admin or own profile
  • Returns: admin information (without password_hash)

  Create admin
  • POST /api/admin - create new admin
  • Body: username, email, password, first_name, last_name, role, phone (optional)
  • Roles: doctor, technician, receptionist
  • Access: super admin only (is_super_admin=True)
  • Returns: created admin info

  Update admin
  • PUT /api/admin/<id> - update admin info
  • Body: email, first_name, last_name, phone, role, is_active
  • Access: super admin (can update all fields) or own profile (can update own info except role/is_active)
  • Returns: updated admin info

  Change password
  • PUT /api/admin/<id>/password - change password
  • Body: old_password, new_password (or just new_password for super admin)
  • Access: own profile (requires old_password) or super admin (no old_password needed)
  • Returns: success message

  Deactivate admin
  • DELETE /api/admin/<id> - deactivate admin (soft delete)
  • Sets is_active=False
  • Access: super admin only
  • Cannot deactivate super admin or own account
  • Returns: success message

  Activate admin
  • PUT /api/admin/<id>/activate - activate admin
  • Sets is_active=True
  • Access: super admin only
  • Returns: success message


  Role-based access summary

  Super Admin can:
  • Access everything
  • Create/manage all admin users (doctor, technician, receptionist)
  • Update/deactivate any admin
  • Change any admin password
  • Full access to all APIs

  Doctor can:
  • View patients, appointments
  • Create/update/delete patients
  • Create/update/delete appointments
  • Update appointment status

  Technician can:
  • View patients, appointments
  • Update appointments
  • Update appointment status
  • Cannot create/delete patients or appointments

  Receptionist can:
  • Create/update/delete patients
  • Create/update/delete appointments
  • Bulk schedule appointments
  • View patients and appointments
  • Cannot update appointment status


  API request flow

  1. Client sends request with authentication token
  2. Middleware validates token and loads admin
  3. Check admin role for the endpoint
  4. Execute business logic
  5. Return JSON response


  Response format

  Success:

     1 │{
     2 │  "success": true,
     3 │  "data": {...},
     4 │  "message": "optional message"
     5 │}

  Error:

     1 │{
     2 │  "success": false,
     3 │  "error": "Error message",
     4 │  "code": 403
     5 │}

  List response:

     1 │{
     2 │  "success": true,
     3 │  "data": [...],
     4 │  "pagination": {
     5 │    "page": 1,
     6 │    "limit": 20,
     7 │    "total": 100
     8 │  }
     9 │}


  Status codes

  • 200 - Success
  • 201 - Created
  • 400 - Bad Request
  • 401 - Unauthorized
  • 403 - Forbidden
  • 404 - Not Found
  • 500 - Server Error


  Authentication method

  • Token-based: JWT or session token
  • Include token in header: Authorization: Bearer <token>
  • Token contains: admin_id, role, expiration


  Query parameters (common)

  • page - page number
  • limit - items per page
  • search - search query
  • sort - sort field
  • order - asc/desc
  • date - filter by date
  • status - filter by status


  Real-time updates

  • WebSocket/SocketIO for:
    • Appointment status changes


  ========================================
  POSTMAN TESTING EXAMPLES
  ========================================

  Base URL: http://localhost:5000

  IMPORTANT: Login first to get session cookie, then use cookies in all subsequent requests.


  AUTHENTICATION API TESTS
  ========================================

  1. Login
  --------
  Method: POST
  URL: http://localhost:5000/api/auth/login
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "username": "admin",
      "password": "admin123"
    }
  
  Expected Response (200):
    {
      "success": true,
      "data": {
        "id": 1,
        "username": "admin",
        "email": "admin@clinic.com",
        "role": "doctor",
        "first_name": "Super",
        "last_name": "Admin"
      }
    }
  
  Note: Postman automatically saves cookies after this request.


  2. Get Current User
  -------------------
  Method: GET
  URL: http://localhost:5000/api/auth/me
  Headers: (none - cookies sent automatically)
  
  Expected Response (200):
    {
      "success": true,
      "data": {
        "id": 1,
        "username": "admin",
        "email": "admin@clinic.com",
        "role": "doctor",
        "first_name": "Super",
        "last_name": "Admin",
        "phone": null,
        "is_active": true,
        "last_login": "2024-01-08T10:30:00",
        "login_count": 1
      }
    }


  3. Logout
  ---------
  Method: POST
  URL: http://localhost:5000/api/auth/logout
  
  Expected Response (200):
    {
      "success": true,
      "message": "Logged out successfully"
    }


  PATIENT API TESTS
  ========================================

  1. Create Patient
  -----------------
  Method: POST
  URL: http://localhost:5000/api/patients
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "id": "P001",
      "first_name": "John",
      "last_name": "Doe",
      "phone": "1234567890",
      "email": "john@example.com",
      "gender": "Male",
      "birth_date": "1990-01-15",
      "height": 175.0,
      "weight": 70.5,
      "blood_group": "O+",
      "title": "Mr"
    }
  
  Expected Response (201):
    {
      "success": true,
      "data": {
        "id": "P001",
        "first_name": "John",
        "last_name": "Doe",
        "phone": "1234567890",
        "email": "john@example.com",
        "gender": "Male",
        "birth_date": "1990-01-15",
        "created_at": "2024-01-08T10:00:00"
      },
      "message": "Patient created successfully"
    }
  
  Access: receptionist, doctor


  2. List Patients
  ---------------
  Method: GET
  URL: http://localhost:5000/api/patients?page=1&limit=10&search=john
  
  Query Params:
    page: 1
    limit: 10
    search: john (optional)
  
  Expected Response (200):
    {
      "success": true,
      "data": [
        {
          "id": "P001",
          "first_name": "John",
          "last_name": "Doe",
          "phone": "1234567890",
          "email": "john@example.com",
          "gender": "Male",
          "birth_date": "1990-01-15",
          "created_at": "2024-01-08T10:00:00"
        }
      ],
      "pagination": {
        "page": 1,
        "limit": 10,
        "total": 1,
        "pages": 1,
        "has_next": false,
        "has_prev": false
      }
    }


  3. Get Single Patient
  ---------------------
  Method: GET
  URL: http://localhost:5000/api/patients/P001
  
  Expected Response (200):
    {
      "success": true,
      "data": {
        "id": "P001",
        "title": "Mr",
        "first_name": "John",
        "last_name": "Doe",
        "gender": "Male",
        "birth_date": "1990-01-15",
        "phone": "1234567890",
        "email": "john@example.com",
        "height": 175.0,
        "weight": 70.5,
        "blood_group": "O+",
        "created_at": "2024-01-08T10:00:00",
        "updated_at": "2024-01-08T10:00:00"
      }
    }


  4. Update Patient
  ----------------
  Method: PUT
  URL: http://localhost:5000/api/patients/P001
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "weight": 72.0,
      "email": "newemail@example.com",
      "notes": "Updated notes"
    }
  
  Expected Response (200):
    {
      "success": true,
      "data": {
        "id": "P001",
        "first_name": "John",
        "last_name": "Doe",
        "phone": "1234567890",
        "email": "newemail@example.com",
        "updated_at": "2024-01-08T11:00:00"
      },
      "message": "Patient updated successfully"
    }
  
  Access: receptionist, doctor


  5. Search Patients
  ----------------
  Method: GET
  URL: http://localhost:5000/api/patients/search?q=john
  
  Query Params:
    q: john (required)
  
  Expected Response (200):
    {
      "success": true,
      "data": [
        {
          "id": "P001",
          "first_name": "John",
          "last_name": "Doe",
          "phone": "1234567890",
          "email": "john@example.com",
          "gender": "Male",
          "birth_date": "1990-01-15"
        }
      ],
      "count": 1
    }


  6. Delete Patient
  -----------------
  Method: DELETE
  URL: http://localhost:5000/api/patients/P001
  
  Expected Response (200):
    {
      "success": true,
      "message": "Patient P001 deleted successfully"
    }
  
  Access: receptionist, doctor
  Note: Will fail if patient has appointments


  APPOINTMENT API TESTS
  ========================================

  1. Create Appointment
  --------------------
  Method: POST
  URL: http://localhost:5000/api/appointments
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "patient_id": "P001",
      "doctor": "Dr. Smith",
      "department": "Cardiology",
      "date": "2024-01-20",
      "time": "10:30",
      "status": "Waiting"
    }
  
  Expected Response (201):
    {
      "success": true,
      "data": {
        "id": 1,
        "patient_id": "P001",
        "patient_name": "John Doe",
        "doctor": "Dr. Smith",
        "department": "Cardiology",
        "date": "2024-01-20",
        "time": "10:30",
        "status": "Waiting",
        "created_at": "2024-01-08T10:00:00"
      },
      "message": "Appointment created successfully"
    }
  
  Access: receptionist, doctor
  Required Fields: patient_id, doctor, date, time


  2. List Appointments
  -------------------
  Method: GET
  URL: http://localhost:5000/api/appointments?date=2024-01-20&status=Waiting&page=1&limit=10
  
  Query Params:
    date: 2024-01-20 (optional, format: YYYY-MM-DD)
    patient_id: P001 (optional)
    doctor: Dr. Smith (optional)
    status: Waiting (optional)
    page: 1 (optional)
    limit: 10 (optional)
  
  Expected Response (200):
    {
      "success": true,
      "data": [
        {
          "id": 1,
          "patient_id": "P001",
          "patient_name": "John Doe",
          "doctor": "Dr. Smith",
          "department": "Cardiology",
          "date": "2024-01-20",
          "time": "10:30",
          "status": "Waiting",
          "created_at": "2024-01-08T10:00:00"
        }
      ],
      "pagination": {
        "page": 1,
        "limit": 10,
        "total": 1,
        "pages": 1,
        "has_next": false,
        "has_prev": false
      }
    }


  3. Get Single Appointment
  -------------------------
  Method: GET
  URL: http://localhost:5000/api/appointments/1
  
  Expected Response (200):
    {
      "success": true,
      "data": {
        "id": 1,
        "patient_id": "P001",
        "patient": {
          "id": "P001",
          "name": "John Doe",
          "phone": "1234567890"
        },
        "doctor": "Dr. Smith",
        "department": "Cardiology",
        "date": "2024-01-20",
        "time": "10:30",
        "status": "Waiting",
        "created_at": "2024-01-08T10:00:00",
        "updated_at": "2024-01-08T10:00:00"
      }
    }


  4. Update Appointment
  --------------------
  Method: PUT
  URL: http://localhost:5000/api/appointments/1
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "time": "11:00",
      "department": "Radiology"
    }
  
  Expected Response (200):
    {
      "success": true,
      "data": {
        "id": 1,
        "patient_id": "P001",
        "patient_name": "John Doe",
        "doctor": "Dr. Smith",
        "department": "Radiology",
        "date": "2024-01-20",
        "time": "11:00",
        "status": "Waiting",
        "updated_at": "2024-01-08T11:00:00"
      },
      "message": "Appointment updated successfully"
    }
  
  Access: receptionist, doctor, technician


  5. Update Appointment Status
  ----------------------------
  Method: PUT
  URL: http://localhost:5000/api/appointments/1/status
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "status": "In-Room"
    }
  
  Valid Status Values:
    - Waiting
    - In-Room
    - In-Scan
    - With Doctor
    - With Technician
    - Review
    - Completed
  
  Expected Response (200):
    {
      "success": true,
      "data": {
        "id": 1,
        "patient_id": "P001",
        "patient_name": "John Doe",
        "status": "In-Room",
        "updated_at": "2024-01-08T11:00:00"
      },
      "message": "Appointment status updated to In-Room"
    }
  
  Access: doctor, technician


  6. Bulk Schedule Appointments
  -----------------------------
  Method: POST
  URL: http://localhost:5000/api/appointments/schedule
  Headers:
    Content-Type: application/json
  Body (raw JSON - array):
    [
      {
        "patient_id": "P001",
        "doctor": "Dr. Smith",
        "department": "Cardiology",
        "date": "2024-01-20",
        "time": "10:30",
        "status": "Waiting"
      },
      {
        "patient_id": "P002",
        "doctor": "Dr. Johnson",
        "department": "Radiology",
        "date": "2024-01-20",
        "time": "11:00",
        "status": "Waiting"
      }
    ]
  
  Expected Response (201):
    {
      "success": true,
      "message": "Created 2 appointment(s)",
      "data": {
        "created": [
          {
            "index": 0,
            "patient_id": "P001",
            "doctor": "Dr. Smith",
            "date": "2024-01-20",
            "time": "10:30"
          },
          {
            "index": 1,
            "patient_id": "P002",
            "doctor": "Dr. Johnson",
            "date": "2024-01-20",
            "time": "11:00"
          }
        ],
        "errors": []
      }
    }
  
  Access: receptionist only
  Max: 50 appointments per request


  7. Delete Appointment
  ---------------------
  Method: DELETE
  URL: http://localhost:5000/api/appointments/1
  
  Expected Response (200):
    {
      "success": true,
      "message": "Appointment 1 deleted successfully",
      "data": {
        "id": 1,
        "patient_id": "P001",
        "date": "2024-01-20",
        "time": "10:30"
      }
    }
  
  Access: receptionist, doctor


  ADMIN MANAGEMENT API TESTS
  ========================================

  1. List Admins
  --------------
  Method: GET
  URL: http://localhost:5000/api/admin?role=doctor&is_active=true&page=1&limit=10
  
  Query Params:
    role: doctor (optional: doctor, technician, receptionist)
    is_active: true (optional: true, false)
    page: 1 (optional)
    limit: 10 (optional)
  
  Expected Response (200):
    {
      "success": true,
      "data": [
        {
          "id": 1,
          "username": "admin",
          "email": "admin@clinic.com",
          "first_name": "Super",
          "last_name": "Admin",
          "role": "doctor",
          "is_active": true,
          "is_super_admin": true,
          "last_login": "2024-01-08T10:30:00",
          "login_count": 1,
          "created_at": "2024-01-08T10:00:00"
        }
      ],
      "pagination": {
        "page": 1,
        "limit": 10,
        "total": 1,
        "pages": 1,
        "has_next": false,
        "has_prev": false
      }
    }


  2. Get Single Admin
  -------------------
  Method: GET
  URL: http://localhost:5000/api/admin/1
  
  Expected Response (200):
    {
      "success": true,
      "data": {
        "id": 1,
        "username": "admin",
        "email": "admin@clinic.com",
        "first_name": "Super",
        "last_name": "Admin",
        "phone": null,
        "role": "doctor",
        "is_active": true,
        "is_super_admin": true,
        "last_login": "2024-01-08T10:30:00",
        "login_count": 1,
        "created_at": "2024-01-08T10:00:00",
        "updated_at": "2024-01-08T10:00:00"
      }
    }
  
  Access: super admin or own profile


  3. Create Admin (Doctor)
  ------------------------
  Method: POST
  URL: http://localhost:5000/api/admin
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "username": "doctor2",
      "email": "doctor2@clinic.com",
      "password": "doctor123",
      "first_name": "Jane",
      "last_name": "Smith",
      "role": "doctor",
      "phone": "9876543210"
    }
  
  Expected Response (201):
    {
      "success": true,
      "data": {
        "id": 5,
        "username": "doctor2",
        "email": "doctor2@clinic.com",
        "first_name": "Jane",
        "last_name": "Smith",
        "phone": "9876543210",
        "role": "doctor",
        "is_active": true,
        "created_at": "2024-01-08T10:00:00"
      },
      "message": "Admin user \"doctor2\" created successfully"
    }
  
  Access: super admin only
  Valid Roles: doctor, technician, receptionist


  4. Create Admin (Technician)
  ---------------------------
  Method: POST
  URL: http://localhost:5000/api/admin
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "username": "technician2",
      "email": "technician2@clinic.com",
      "password": "tech123",
      "first_name": "Bob",
      "last_name": "Johnson",
      "role": "technician"
    }
  
  Expected Response (201):
    {
      "success": true,
      "data": {
        "id": 6,
        "username": "technician2",
        "email": "technician2@clinic.com",
        "first_name": "Bob",
        "last_name": "Johnson",
        "role": "technician",
        "is_active": true,
        "created_at": "2024-01-08T10:00:00"
      },
      "message": "Admin user \"technician2\" created successfully"
    }
  
  Access: super admin only


  5. Create Admin (Receptionist)
  ------------------------------
  Method: POST
  URL: http://localhost:5000/api/admin
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "username": "receptionist2",
      "email": "receptionist2@clinic.com",
      "password": "recep123",
      "first_name": "Alice",
      "last_name": "Williams",
      "role": "receptionist"
    }
  
  Expected Response (201):
    {
      "success": true,
      "data": {
        "id": 7,
        "username": "receptionist2",
        "email": "receptionist2@clinic.com",
        "first_name": "Alice",
        "last_name": "Williams",
        "role": "receptionist",
        "is_active": true,
        "created_at": "2024-01-08T10:00:00"
      },
      "message": "Admin user \"receptionist2\" created successfully"
    }
  
  Access: super admin only


  6. Update Admin
  --------------
  Method: PUT
  URL: http://localhost:5000/api/admin/5
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "email": "newemail@clinic.com",
      "phone": "1111111111",
      "role": "doctor"
    }
  
  Expected Response (200):
    {
      "success": true,
      "data": {
        "id": 5,
        "username": "doctor2",
        "email": "newemail@clinic.com",
        "first_name": "Jane",
        "last_name": "Smith",
        "phone": "1111111111",
        "role": "doctor",
        "is_active": true,
        "updated_at": "2024-01-08T11:00:00"
      },
      "message": "Admin updated successfully"
    }
  
  Access: super admin (can update all fields) or own profile (limited fields)


  7. Change Password
  -----------------
  Method: PUT
  URL: http://localhost:5000/api/admin/5/password
  Headers:
    Content-Type: application/json
  Body (raw JSON):
    {
      "old_password": "doctor123",
      "new_password": "newpassword123"
    }
  
  Expected Response (200):
    {
      "success": true,
      "message": "Password changed successfully"
    }
  
  Access: own profile (requires old_password) or super admin (no old_password needed)


  8. Deactivate Admin
  -------------------
  Method: DELETE
  URL: http://localhost:5000/api/admin/5
  
  Expected Response (200):
    {
      "success": true,
      "message": "Admin \"doctor2\" deactivated successfully"
    }
  
  Access: super admin only
  Note: Cannot deactivate super admin or own account


  9. Activate Admin
  ----------------
  Method: PUT
  URL: http://localhost:5000/api/admin/5/activate
  
  Expected Response (200):
    {
      "success": true,
      "message": "Admin \"doctor2\" activated successfully"
    }
  
  Access: super admin only


  TESTING WORKFLOW
  ========================================

  Step 1: Login as Super Admin
  -----------------------------
  POST /api/auth/login
  {
    "username": "admin",
    "password": "admin123"
  }
  → Save cookies automatically


  Step 2: Create New Doctor
  -------------------------
  POST /api/admin
  {
    "username": "doctor2",
    "email": "doctor2@clinic.com",
    "password": "doctor123",
    "first_name": "Jane",
    "last_name": "Smith",
    "role": "doctor"
  }
  → Note the admin ID returned


  Step 3: Create Patient
  -----------------------
  POST /api/patients
  {
    "id": "P001",
    "first_name": "John",
    "last_name": "Doe",
    "phone": "1234567890",
    "email": "john@example.com"
  }
  → Note the patient ID


  Step 4: Create Appointment
  ---------------------------
  POST /api/appointments
  {
    "patient_id": "P001",
    "doctor": "Dr. Smith",
    "date": "2024-01-20",
    "time": "10:30",
    "department": "Cardiology"
  }
  → Note the appointment ID


  Step 5: Update Appointment Status
  ----------------------------------
  PUT /api/appointments/1/status
  {
    "status": "In-Room"
  }


  Step 6: List All Data
  ---------------------
  GET /api/patients
  GET /api/appointments
  GET /api/admin


  ERROR TESTING
  ========================================

  1. Invalid Login
  ---------------
  POST /api/auth/login
  {
    "username": "wrong",
    "password": "wrong"
  }
  Expected: 401 Unauthorized
  {
    "success": false,
    "error": "Invalid username or password"
  }


  2. Missing Required Fields
  --------------------------
  POST /api/patients
  {
    "first_name": "John"
    // Missing: id, last_name, phone
  }
  Expected: 400 Bad Request
  {
    "success": false,
    "error": "Field \"id\" is required"
  }


  3. Permission Denied
  -------------------
  Login as technician, then try:
  POST /api/patients
  Expected: 403 Forbidden
  {
    "success": false,
    "error": "Permission denied. Required roles: receptionist, doctor"
  }


  4. Not Found
  -----------
  GET /api/patients/P999
  Expected: 404 Not Found
  {
    "success": false,
    "error": "Patient not found"
  }


  5. Duplicate Entry
  -----------------
  POST /api/patients
  {
    "id": "P001",  // Already exists
    "first_name": "John",
    "last_name": "Doe",
    "phone": "1234567890"
  }
  Expected: 400 Bad Request
  {
    "success": false,
    "error": "Patient with ID P001 already exists"
  }


  DEFAULT TEST USERS
  ========================================

  Super Admin:
    Username: admin
    Password: admin123
    Role: doctor
    is_super_admin: true

  Doctor:
    Username: doctor1
    Password: doctor123
    Role: doctor

  Technician:
    Username: technician1
    Password: tech123
    Role: technician

  Receptionist:
    Username: receptionist1
    Password: recep123
    Role: receptionist


  POSTMAN COLLECTION SETUP
  ========================================

  1. Create Environment
  -------------------
  Name: Clinic Local
  Variables:
    base_url = http://localhost:5000

  2. Create Collection
  --------------------
  Name: Clinic API
  Folders:
    - Authentication
    - Patients
    - Appointments
    - Admin Management

  3. Use Environment Variables
  ---------------------------
  In requests, use: {{base_url}}/api/auth/login

  4. Cookie Management
  ------------------
  - Postman saves cookies automatically after login
  - Cookies sent automatically in subsequent requests
  - Check "Cookies" tab to view saved cookies
  - After logout, cookies are cleared

  5. Pre-request Scripts (Optional)
  ---------------------------------
  For requests that need auth, add:
  // Cookies are automatically sent, no script needed

  6. Tests (Optional)
  -------------------
  Add tests in "Tests" tab:
  pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
  });

  pm.test("Response has success field", function () {
    var jsonData = pm.response.json();
    pm.expect(jsonData).to.have.property('success');
  });


  QUICK REFERENCE TABLE
  ========================================

  | Endpoint | Method | Auth | Role Required | Test User |
  |----------|--------|------|---------------|-----------|
  | /api/auth/login | POST | No | - | any |
  | /api/auth/logout | POST | Yes | - | any |
  | /api/auth/me | GET | Yes | - | any |
  | /api/patients | GET | Yes | - | any |
  | /api/patients | POST | Yes | receptionist, doctor | receptionist1 |
  | /api/patients/<id> | GET | Yes | - | any |
  | /api/patients/<id> | PUT | Yes | receptionist, doctor | receptionist1 |
  | /api/patients/<id> | DELETE | Yes | receptionist, doctor | receptionist1 |
  | /api/patients/search | GET | Yes | - | any |
  | /api/appointments | GET | Yes | - | any |
  | /api/appointments | POST | Yes | receptionist, doctor | receptionist1 |
  | /api/appointments/<id> | GET | Yes | - | any |
  | /api/appointments/<id> | PUT | Yes | receptionist, doctor, technician | technician1 |
  | /api/appointments/<id>/status | PUT | Yes | doctor, technician | doctor1 |
  | /api/appointments/<id> | DELETE | Yes | receptionist, doctor | receptionist1 |
  | /api/appointments/schedule | POST | Yes | receptionist | receptionist1 |
  | /api/admin | GET | Yes | - | any |
  | /api/admin | POST | Yes | super admin | admin |
  | /api/admin/<id> | GET | Yes | super admin or own | any |
  | /api/admin/<id> | PUT | Yes | super admin or own | admin |
  | /api/admin/<id>/password | PUT | Yes | own or super admin | any |
  | /api/admin/<id> | DELETE | Yes | super admin | admin |
  | /api/admin/<id>/activate | PUT | Yes | super admin | admin |
