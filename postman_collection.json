{
  "info": {
    "name": "Clinic Management System",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://129.121.75.225"
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"admin\",\n    \"password\": \"password123\"\n}"
            },
            "url": "{{base_url}}/api/auth/login"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let json = {};\n",
                  "try {\n",
                  "  json = pm.response.json();\n",
                  "} catch (e) {\n",
                  "  console.log('No JSON body');\n",
                  "}\n",
                  "if (json && json.access_token) {\n",
                  "  pm.collectionVariables.set('access_token', json.access_token);\n",
                  "  console.log('Access token saved to collection variable');\n",
                  "} else {\n",
                  "  console.log('No access_token field in response');\n",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/auth/logout"
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/auth/me"
          }
        },
        {
          "name": "Forgot Password",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"user@example.com\"\n}"
            },
            "url": "{{base_url}}/api/auth/forgot-password"
          }
        },
        {
          "name": "Verify Reset Token",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"token\": \"token_from_email\"\n}"
            },
            "url": "{{base_url}}/api/auth/verify-reset-token"
          }
        },
        {
          "name": "Reset Password",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"token\": \"token_from_email\",\n    \"new_password\": \"newpassword123\"\n}"
            },
            "url": "{{base_url}}/api/auth/reset-password"
          }
        },
        {
          "name": "Set Password (First Time)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"token\": \"token_from_email\",\n    \"password\": \"mypassword123\"\n}"
            },
            "url": "{{base_url}}/api/auth/set-password"
          }
        }
      ]
    },
    {
      "name": "Receptionists",
      "item": [
        {
          "name": "Create Receptionist",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"reception1\",\n    \"email\": \"reception1@clinic.com\",\n    \"first_name\": \"Jane\",\n    \"last_name\": \"Doe\",\n    \"phone\": \"1234567890\",\n    \"role\": \"receptionist\"\n}"
            },
            "url": "{{base_url}}/api/receptionists"
          }
        },
        {
          "name": "List Receptionists",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/receptionists?role=receptionist",
              "host": ["{{base_url}}"],
              "path": ["api", "receptionists"],
              "query": [{"key": "role", "value": "receptionist"}]
            }
          }
        },
        {
          "name": "Get Receptionist",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/receptionists/6"
          }
        },
        {
          "name": "Update Receptionist",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"first_name\": \"Jane Updated\",\n    \"phone\": \"9876543210\",\n    \"is_active\": true\n}"
            },
            "url": "{{base_url}}/api/receptionists/6"
          }
        },
        {
          "name": "Deactivate Receptionist",
          "request": {
            "method": "DELETE",
            "url": "{{base_url}}/api/receptionists/6"
          }
        },
        {
          "name": "Activate Receptionist",
          "request": {
            "method": "PUT",
            "url": "{{base_url}}/api/receptionists/6/activate"
          }
        }
      ]
    },
    {
      "name": "Doctors",
      "item": [
        {
          "name": "Create Doctor",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"doctor1\",\n    \"email\": \"doctor1@clinic.com\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Smith\",\n    \"phone\": \"1234567890\",\n    \"role\": \"doctor\"\n}"
            },
            "url": "{{base_url}}/api/doctors"
          }
        },
        {
          "name": "List Doctors",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/doctors?role=doctor",
              "host": ["{{base_url}}"],
              "path": ["api", "doctors"],
              "query": [{"key": "role", "value": "doctor"}]
            }
          }
        },
        {
          "name": "Get Doctor",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/doctors/5"
          }
        },
        {
          "name": "Update Doctor",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"first_name\": \"John Updated\",\n    \"phone\": \"9876543210\"\n}"
            },
            "url": "{{base_url}}/api/doctors/5"
          }
        },
        {
          "name": "Deactivate Doctor",
          "request": {
            "method": "DELETE",
            "url": "{{base_url}}/api/doctors/5"
          }
        },
        {
          "name": "Activate Doctor",
          "request": {
            "method": "PUT",
            "url": "{{base_url}}/api/doctors/5/activate"
          }
        }
      ]
    },
    {
      "name": "Patients",
      "item": [
        {
          "name": "Create Patient",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"title\": \"Mr\",\n    \"first_name\": \"Alice\",\n    \"last_name\": \"Johnson\",\n    \"birth_date\": \"1990-05-15\",\n    \"gender\": \"Female\",\n    \"phone\": \"1234567890\",\n    \"email\": \"alice@example.com\",\n    \"identity_number\": \"ID123456\",\n    \"height\": 165,\n    \"weight\": 60,\n    \"blood_group\": \"O+\",\n    \"notes\": \"No allergies\",\n    \"primary_doctor\": \"Dr. Smith\",\n    \"new_patient\": true\n}"
            },
            "url": "{{base_url}}/api/patients"
          }
        },
        {
          "name": "List Patients",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/patients?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["api", "patients"],
              "query": [
                {"key": "page", "value": "1"},
                {"key": "limit", "value": "20"}
              ]
            }
          }
        },
        {
          "name": "Get Patient",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/patients/P001"
          }
        },
        {
          "name": "Update Patient",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"phone\": \"9876543210\",\n    \"height\": 170,\n    \"weight\": 65,\n    \"notes\": \"Updated notes\"\n}"
            },
            "url": "{{base_url}}/api/patients/P001"
          }
        },
        {
          "name": "Delete Patient",
          "request": {
            "method": "DELETE",
            "url": "{{base_url}}/api/patients/P001"
          }
        },
        {
          "name": "Search Patients",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/patients/search?q=alice",
              "host": ["{{base_url}}"],
              "path": ["api", "patients", "search"],
              "query": [{"key": "q", "value": "alice"}]
            }
          }
        }
      ]
    },
    {
      "name": "Appointments",
      "item": [
        {
          "name": "Create Appointment",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"patient_id\": \"PAT001\",\n    \"date\": \"2026-02-10\",\n    \"time\": \"10:00\",\n    \"status\": \"Waiting\"\n}"
            },
            "url": "{{base_url}}/api/appointments"
          }
        },
        {
          "name": "List Appointments (Today - Default)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/appointments?date=2026-02-09&page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["api", "appointments"],
              "query": [
                {"key": "date", "value": "2026-02-09", "description": "YYYY-MM-DD (optional, defaults to today)"},
                {"key": "patient_id", "value": "", "description": "Filter by patient ID (optional)"},
                {"key": "doctor", "value": "", "description": "Filter by doctor name (optional)"},
                {"key": "status", "value": "", "description": "Filter by status (optional)"},
                {"key": "page", "value": "1"},
                {"key": "limit", "value": "20"}
              ]
            }
          }
        },
        {
          "name": "Get Appointment",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/appointments/1"
          }
        },
        {
          "name": "Update Appointment",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"doctor\": \"Dr. Smith\",\n    \"date\": \"2026-02-10\",\n    \"time\": \"11:00\"\n}"
            },
            "url": "{{base_url}}/api/appointments/1"
          }
        },
        {
          "name": "Update Appointment Status",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"With Doctor\"\n}"
            },
            "url": "{{base_url}}/api/appointments/1/status"
          }
        },
        {
          "name": "Delete Appointment",
          "request": {
            "method": "DELETE",
            "url": "{{base_url}}/api/appointments/1"
          }
        }
      ]
    },
    {
      "name": "Prescriptions",
      "item": [
        {
          "name": "Create Prescription (Single Medicine)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"patient_id\": \"PAT001\",\n    \"medicine\": \"Paracetamol 500mg\",\n    \"dosage\": \"1-0-1\",\n    \"duration_days\": 5,\n    \"notes\": \"After food\"\n}"
            },
            "url": "{{base_url}}/api/prescriptions"
          }
        },
        {
          "name": "Create Prescription (Multiple Medicines)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"patient_id\": \"PAT001\",\n    \"items\": [\n        {\n            \"medicine\": \"Paracetamol 500mg\",\n            \"dosage\": \"1-0-1\",\n            \"duration_days\": 5,\n            \"notes\": \"After food\"\n        },\n        {\n            \"medicine\": \"Amoxicillin 250mg\",\n            \"dosage\": \"1-1-1\",\n            \"duration_days\": 7,\n            \"notes\": \"Before meals\"\n        }\n    ]\n}"
            },
            "url": "{{base_url}}/api/prescriptions"
          }
        },
        {
          "name": "Get Prescription",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/prescriptions/1"
          }
        },
        {
          "name": "Download Prescription PDF",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/prescriptions/1/download?inline=1",
              "host": ["{{base_url}}"],
              "path": ["api", "prescriptions", "1", "download"],
              "query": [
                {"key": "inline", "value": "1", "description": "Preview in browser (optional)"}
              ]
            }
          }
        },
        {
          "name": "Get Patient Prescriptions",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/prescriptions/patient/PAT001?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["api", "prescriptions", "patient", "PAT001"],
              "query": [
                {"key": "page", "value": "1"},
                {"key": "limit", "value": "20"}
              ]
            }
          }
        },
        {
          "name": "Delete Prescription",
          "request": {
            "method": "DELETE",
            "url": "{{base_url}}/api/prescriptions/1"
          }
        }
      ]
    },
    {
      "name": "Reports",
      "item": [
        {
          "name": "List Reports",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/reports?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["api", "reports"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" }
              ]
            }
          }
        },
        {
          "name": "Generate Report (Template-based)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"study_instance_uid\": \"1.2.840.113619.2.55.3.604688433.962.1453108125.467\",\n  \"patient_id\": \"PAT001\",\n  \"report_number\": \"RPT-TEST-0001\",\n  \"notes\": \"Test report\",\n  \"template_id\": 1,\n  \"template_data\": {\n    \"crl\": 45.0,\n    \"fetal_heart_rate\": 150,\n    \"ga_weeks\": 12,\n    \"edd\": \"2026-09-01\",\n    \"impression\": \"Normal 1st trimester ultrasound.\"\n  },\n  \"language\": \"en\",\n  \"visit_id\": 1,\n  \"async\": false\n}"
            },
            "url": "{{base_url}}/api/reports/generate"
          }
        },
        {
          "name": "Get Report",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/reports/1"
          }
        },
        {
          "name": "Get Report By Number",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/reports/number/RPT-TEST-0001"
          }
        },
        {
          "name": "Download Report PDF",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/reports/1/download"
          }
        },
        {
          "name": "Get Report Status",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/reports/1/status"
          }
        },
        {
          "name": "Validate Report",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/reports/1/validate"
          }
        }
      ]
    },
    {
      "name": "Visits",
      "item": [
        {
          "name": "List Visits",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/visits?patient_id=PAT001&visit_status=scheduled&date=2026-02-09&page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["api", "visits"],
              "query": [
                { "key": "patient_id", "value": "PAT001" },
                { "key": "visit_status", "value": "scheduled" },
                { "key": "date", "value": "2026-02-09" },
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" }
              ]
            }
          }
        },
        {
          "name": "Get Visit",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/visits/1"
          }
        },
        {
          "name": "Update Visit",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"visit_status\": \"completed\",\n  \"exam_type\": \"OB 1st trimester scan\",\n  \"modality\": \"US\",\n  \"study_instance_uid\": \"1.2.840.113619.2.55.3.604688433.962.1453108125.467\"\n}"
            },
            "url": "{{base_url}}/api/visits/1"
          }
        }
      ]
    },
    {
      "name": "Report Templates",
      "item": [
        {
          "name": "List Templates",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/report-templates?template_type=OB&category=1st_trimester&language=en&is_active=true",
              "host": ["{{base_url}}"],
              "path": ["api", "report-templates"],
              "query": [
                { "key": "template_type", "value": "OB" },
                { "key": "category", "value": "1st_trimester" },
                { "key": "language", "value": "en" },
                { "key": "is_active", "value": "true" }
              ]
            }
          }
        },
        {
          "name": "Get Template",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/report-templates/1"
          }
        },
        {
          "name": "Create Template",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Custom Growth Scan\",\n  \"code\": \"OB_GROWTH_CUSTOM\",\n  \"template_type\": \"OB\",\n  \"category\": \"growth\",\n  \"language\": \"en\",\n  \"fields\": [\n    { \"code\": \"bpd\", \"label\": \"Biparietal Diameter\", \"type\": \"number\", \"unit\": \"mm\", \"required\": true },\n    { \"code\": \"impression\", \"label\": \"Impression\", \"type\": \"textarea\", \"required\": true }\n  ],\n  \"required_fields\": [\"bpd\", \"impression\"],\n  \"is_active\": true,\n  \"display_order\": 100\n}"
            },
            "url": "{{base_url}}/api/report-templates"
          }
        },
        {
          "name": "Update Template",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Morphology Scan (Updated Name)\",\n  \"is_active\": true\n}"
            },
            "url": "{{base_url}}/api/report-templates/1"
          }
        }
      ]
    },
    {
      "name": "DICOM",
      "item": [
        {
          "name": "Get Server Status",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/dicom/server/status"
          }
        },
        {
          "name": "Start DICOM Servers",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/dicom/server/start"
          }
        },
        {
          "name": "Stop DICOM Servers",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/dicom/server/stop"
          }
        },
        {
          "name": "Create MWL Entry",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"appointment_id\": 1\n}"
            },
            "url": "{{base_url}}/api/dicom/mwl"
          }
        },
        {
          "name": "List MWL Entries",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/dicom/mwl"
          }
        },
        {
          "name": "List DICOM Images",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/dicom/images"
          }
        },
        {
          "name": "Get Patient Images",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/dicom/images/patient/1"
          }
        }
      ]
    },
    {
      "name": "Super Admin - Clinics",
      "item": [
        {
          "name": "Create Clinic",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"New Clinic\",\n    \"address\": \"123 Medical St\",\n    \"phone\": \"1234567890\",\n    \"email\": \"clinic@example.com\"\n}"
            },
            "url": "{{base_url}}/api/super-admin/clinics"
          }
        },
        {
          "name": "List Clinics",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/super-admin/clinics"
          }
        },
        {
          "name": "Get Clinic",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/super-admin/clinics/1"
          }
        },
        {
          "name": "Update Clinic",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Updated Clinic Name\",\n    \"is_active\": true\n}"
            },
            "url": "{{base_url}}/api/super-admin/clinics/1"
          }
        },
        {
          "name": "Deactivate Clinic",
          "request": {
            "method": "DELETE",
            "url": "{{base_url}}/api/super-admin/clinics/1"
          }
        },
        {
          "name": "Create Clinic User",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"clinicuser\",\n    \"email\": \"user@clinic.com\",\n    \"first_name\": \"Clinic\",\n    \"last_name\": \"User\",\n    \"role\": \"doctor\"\n}"
            },
            "url": "{{base_url}}/api/super-admin/clinics/1/users"
          }
        },
        {
          "name": "List Clinic Users",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/super-admin/clinics/1/users"
          }
        }
      ]
    },
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/health"
          }
        }
      ]
    }
  ]
}
